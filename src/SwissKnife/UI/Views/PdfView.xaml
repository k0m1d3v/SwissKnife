<UserControl x:Class="SwissKnife.UI.Views.PdfView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="520" d:DesignWidth="760">
    <ScrollViewer VerticalScrollBarVisibility="Auto" 
                  HorizontalScrollBarVisibility="Disabled"
                  Padding="0 0 6 0">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Card 1: Merge PDF -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Unisci PDF" FontSize="18" FontWeight="SemiBold" Foreground="{StaticResource TextPrimaryBrush}"/>
                        <Border Background="{StaticResource AccentBrush}" CornerRadius="8" Padding="8 4" Margin="10 0 0 0">
                            <TextBlock Text="Merge" FontWeight="Bold" Foreground="White" FontSize="12"/>
                        </Border>
                    </StackPanel>
                    <TextBlock Text="Unisce piu file PDF in un unico documento mantenendo l ordine selezionato." Foreground="{StaticResource TextSecondaryBrush}" Margin="0 12 0 0" />

                    <StackPanel Margin="0 12 0 0">
                        <TextBlock Text="File da unire" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" Margin="0 0 0 4"/>
                        
                        <Grid Margin="0 0 0 10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Border BorderBrush="{StaticResource BorderBrushLight}" BorderThickness="1" CornerRadius="10" Background="#202020">
                                <ListBox x:Name="MergeFilesListBox" 
                                         Height="120" 
                                         Background="Transparent"
                                         BorderThickness="0"
                                         Foreground="{StaticResource TextPrimaryBrush}"
                                         Margin="8"/>
                            </Border>
                            <StackPanel Grid.Column="1" Margin="10 0 0 0" VerticalAlignment="Center">
                                <Button Content="Up" Style="{StaticResource GhostButtonStyle}" Click="MoveUpButton_Click" Width="50" Height="30" Margin="0 0 0 4"/>
                                <Button Content="Down" Style="{StaticResource GhostButtonStyle}" Click="MoveDownButton_Click" Width="50" Height="30" Margin="0 0 0 4"/>
                                <Button Content="Remove" Style="{StaticResource GhostButtonStyle}" Click="RemoveMergeFileButton_Click" Width="50" Height="30"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2" Margin="10 0 0 0" VerticalAlignment="Center">
                                <Button x:Name="AddMergeFilesButton" Content="Aggiungi File" Style="{StaticResource PrimaryButtonStyle}" Click="AddMergeFilesButton_Click" Width="120" Height="30" Margin="0 0 0 4"/>
                                <Button x:Name="ClearMergeFilesButton" Content="Cancella Lista" Style="{StaticResource GhostButtonStyle}" Click="ClearMergeFilesButton_Click" Width="120" Height="30"/>
                            </StackPanel>
                        </Grid>

                        <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                            <Button x:Name="MergePdfButton" Content="Unisci PDF" Style="{StaticResource PrimaryButtonStyle}" Click="MergePdfButton_Click" Width="140"/>
                            <Button x:Name="MergeCancelButton" Content="Annulla" Style="{StaticResource GhostButtonStyle}" Click="MergeCancelButton_Click" Width="100" IsEnabled="False" Margin="8 0 0 0"/>
                        </StackPanel>

                        <StackPanel Margin="0 0 0 10">
                            <TextBlock Text="Avanzamento" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12"/>
                            <ProgressBar x:Name="MergeProgressBar" Minimum="0" Maximum="100" Visibility="Collapsed" Margin="0 6 0 0"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Card 2: Split PDF -->
            <Border Grid.Row="1" Style="{StaticResource CardStyle}" Margin="0 12 0 0">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Dividi PDF" FontSize="18" FontWeight="SemiBold" Foreground="{StaticResource TextPrimaryBrush}"/>
                        <Border Background="#FF6B35" CornerRadius="8" Padding="8 4" Margin="10 0 0 0">
                            <TextBlock Text="Split" FontWeight="Bold" Foreground="White" FontSize="12"/>
                        </Border>
                    </StackPanel>
                    <TextBlock Text="Divide un file PDF in piu documenti in base a pagine o range personalizzati." Foreground="{StaticResource TextSecondaryBrush}" Margin="0 12 0 0" />

                    <StackPanel Margin="0 12 0 0">
                        <TextBlock Text="File PDF da dividere" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" Margin="0 0 0 4"/>
                        <Grid Margin="0 0 0 10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="SplitFilePathTextBox" VerticalContentAlignment="Center"/>
                            <Button x:Name="BrowseSplitFileButton" Grid.Column="1" Content="Sfoglia" Style="{StaticResource GhostButtonStyle}" Click="BrowseSplitFileButton_Click" Margin="10 0 0 0" />
                        </Grid>

                        <TextBlock Text="Cartella di destinazione" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" Margin="0 0 0 4"/>
                        <Grid Margin="0 0 0 10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="SplitOutputPathTextBox" VerticalContentAlignment="Center"/>
                            <Button x:Name="BrowseSplitOutputButton" Grid.Column="1" Content="Sfoglia" Style="{StaticResource GhostButtonStyle}" Click="BrowseSplitOutputButton_Click" Margin="10 0 0 0" />
                        </Grid>

                        <TextBlock Text="Modalita di divisione" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" Margin="0 0 0 4"/>
                        <Border BorderBrush="{StaticResource BorderBrushLight}" BorderThickness="1" CornerRadius="10" Padding="12" Margin="0 0 0 10">
                            <StackPanel>
                                <RadioButton x:Name="SplitByPagesRadio" Content="Dividi per numero di pagine" IsChecked="True" Foreground="{StaticResource TextPrimaryBrush}" Margin="0 0 0 8"/>
                                <Grid Margin="20 0 0 8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="100"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Pagine per file:" Foreground="{StaticResource TextSecondaryBrush}" VerticalAlignment="Center" Margin="0 0 8 0"/>
                                    <TextBox x:Name="PagesPerFileTextBox" Grid.Column="1" Text="1" VerticalContentAlignment="Center"/>
                                </Grid>
                                
                                <RadioButton x:Name="SplitByRangeRadio" Content="Dividi per range personalizzati" Foreground="{StaticResource TextPrimaryBrush}" Margin="0 0 0 8"/>
                                <Grid Margin="20 0 0 0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Range:" Foreground="{StaticResource TextSecondaryBrush}" VerticalAlignment="Center" Margin="0 0 8 0"/>
                                    <TextBox x:Name="SplitRangeTextBox" Grid.Column="1" VerticalContentAlignment="Center"/>
                                </Grid>
                                <TextBlock Text="Esempio: 1-3,5-7,10 (pagine 1-3, 5-7, e 10)" 
                                           Foreground="{StaticResource TextSecondaryBrush}" 
                                           FontSize="11" 
                                           Margin="20 4 0 0"
                                           FontStyle="Italic"/>
                            </StackPanel>
                        </Border>

                        <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                            <Button x:Name="SplitPdfButton" Content="Dividi PDF" Style="{StaticResource PrimaryButtonStyle}" Click="SplitPdfButton_Click" Width="140"/>
                            <Button x:Name="SplitCancelButton" Content="Annulla" Style="{StaticResource GhostButtonStyle}" Click="SplitCancelButton_Click" Width="100" IsEnabled="False" Margin="8 0 0 0"/>
                        </StackPanel>

                        <StackPanel Margin="0 0 0 10">
                            <TextBlock Text="Avanzamento" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12"/>
                            <ProgressBar x:Name="SplitProgressBar" Minimum="0" Maximum="100" Visibility="Collapsed" Margin="0 6 0 0"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Card 3: Compress PDF -->
            <Border Grid.Row="2" Style="{StaticResource CardStyle}" Margin="0 12 0 0">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Comprimi PDF" FontSize="18" FontWeight="SemiBold" Foreground="{StaticResource TextPrimaryBrush}"/>
                        <Border Background="#4CAF50" CornerRadius="8" Padding="8 4" Margin="10 0 0 0">
                            <TextBlock Text="Compress" FontWeight="Bold" Foreground="White" FontSize="12"/>
                        </Border>
                    </StackPanel>
                    <TextBlock Text="Riduce le dimensioni del file PDF ottimizzando immagini e struttura del documento." Foreground="{StaticResource TextSecondaryBrush}" Margin="0 12 0 0" />

                    <StackPanel Margin="0 12 0 0">
                        <TextBlock Text="File PDF da comprimere" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" Margin="0 0 0 4"/>
                        <Grid Margin="0 0 0 10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="CompressFilePathTextBox" VerticalContentAlignment="Center"/>
                            <Button x:Name="BrowseCompressFileButton" Grid.Column="1" Content="Sfoglia" Style="{StaticResource GhostButtonStyle}" Click="BrowseCompressFileButton_Click" Margin="10 0 0 0" />
                        </Grid>

                        <TextBlock Text="Livello di compressione" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" Margin="0 0 0 4"/>
                        <Border BorderBrush="{StaticResource BorderBrushLight}" BorderThickness="1" CornerRadius="10" Padding="12" Margin="0 0 0 10">
                            <StackPanel>
                                <RadioButton x:Name="CompressLowRadio" Content="Bassa (Qualita alta, file piu grande)" Foreground="{StaticResource TextPrimaryBrush}" Margin="0 0 0 6"/>
                                <RadioButton x:Name="CompressMediumRadio" Content="Media (Bilanciato)" IsChecked="True" Foreground="{StaticResource TextPrimaryBrush}" Margin="0 0 0 6"/>
                                <RadioButton x:Name="CompressHighRadio" Content="Alta (Qualita bassa, file piu piccolo)" Foreground="{StaticResource TextPrimaryBrush}"/>
                            </StackPanel>
                        </Border>

                        <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                            <Button x:Name="CompressPdfButton" Content="Comprimi PDF" Style="{StaticResource PrimaryButtonStyle}" Click="CompressPdfButton_Click" Width="140"/>
                            <Button x:Name="CompressCancelButton" Content="Annulla" Style="{StaticResource GhostButtonStyle}" Click="CompressCancelButton_Click" Width="100" IsEnabled="False" Margin="8 0 0 0"/>
                        </StackPanel>

                        <StackPanel Margin="0 0 0 10">
                            <TextBlock Text="Avanzamento" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12"/>
                            <ProgressBar x:Name="CompressProgressBar" Minimum="0" Maximum="100" Visibility="Collapsed" Margin="0 6 0 0"/>
                        </StackPanel>

                        <Border x:Name="CompressResultBorder" Background="#191919" BorderBrush="{StaticResource BorderBrushLight}" BorderThickness="1" CornerRadius="10" Padding="12" Visibility="Collapsed">
                            <StackPanel>
                                <TextBlock x:Name="CompressResultTextBlock" FontSize="13" FontWeight="SemiBold" Foreground="{StaticResource TextPrimaryBrush}"/>
                                <TextBlock x:Name="CompressDetailTextBlock" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" Margin="0 4 0 0" TextWrapping="Wrap"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Card 4: Log -->
            <Border Grid.Row="3" Style="{StaticResource CardStyle}" Margin="0 12 0 0" Padding="14">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Log" FontSize="14" FontWeight="SemiBold" Foreground="{StaticResource TextPrimaryBrush}"/>
                        <TextBlock Text="(ultimi messaggi)" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" Margin="8 0 0 0"/>
                    </StackPanel>
                    <TextBox x:Name="LogTextBox"
                             Height="120"
                             AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"
                             IsReadOnly="True"
                             TextWrapping="Wrap"
                             Margin="0 6 0 0"/>
                </StackPanel>
            </Border>
        </Grid>
    </ScrollViewer>
</UserControl>
